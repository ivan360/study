
06. Linux的文件权限与目录配置

    Linux的每个文件中，依据权限分为使用者、群组与其他人三种身份；
    群组最有用的功能之一，就是当你在团队开发资源的时候，且每个账号都可以有多个群组的支持；
    利用ls -l显示的文件属性中，第一个字段是文件的权限，共有十个位，第一个位是文件类型， 接下来三个为一组共三组，为使用者、群组、其他人的权限，权限有r,w,x三种；
    如果档名之前多一个『 . 』，则代表这个文件为『隐藏档』；
    更改文件的群组支持可用chgrp，修改文件的拥有者可用chown，修改文件的权限可用chmod
    chmod修改权限的方法有两种，分别是符号法与数字法，数字法中r,w,x分数为4,2,1；
    对文件来讲，权限的效能为：
        r：可读取此一文件的实际内容，如读取文本文件的文字内容等；
        w：可以编辑、新增或者是修改该文件的内容(但不含删除该文件)；
        x：该文件具有可以被系统执行的权限。
    对目录来说，权限的效能为：
        r (read contents in directory)
        w (modify contents of directory)
        x (access directory)
    要开放目录给任何人浏览时，应该至少也要给予r及x的权限，但w权限不可随便给；
    Linux档名的限制为：单一文件或目录的最大容许文件名为 255 个字符；包含完整路径名称及目录 (/) 之完整档名为 4096 个字符
    根据FHS的官方文件指出， 他们的主要目的是希望让使用者可以了解到已安装软件通常放置于那个目录下
    FHS订定出来的四种目录特色为：shareable, unshareable, static, variable等四类；
    FHS所定义的三层主目录为：/, /var, /usr三层而已；
    有五个目录不可与根目录放在不同的partition，分别为/etc, /bin, /lib, /dev, /sbin五个。

07. Linux文件与目录管理

    绝对路径：『一定由根目录 / 写起』；相对路径：『不是由 / 写起』
    特殊目录有：., .., -, ~, ~account需要注意；
    与目录相关的命令有：cd, mkdir, rmdir, pwd 等重要命令；
    rmdir 仅能删除空目录，要删除非空目录需使用『 rm -r 』命令；
    使用者能使用的命令是依据 PATH 变量所规定的目录去搜寻的；
    不同的身份(root 与一般用户)系统默认的 PATH 并不相同。差异较大的地方在於 /sbin, /usr/sbin ；
    ls 可以检视文件的属性，尤其 -d, -a, -l 等选项特别重要！
    文件的复制、删除、移动可以分别使用：cp, rm , mv等命令来操作；
    检查文件的内容(读档)可使用的命令包括有：cat, tac, nl, more, less, head, tail, od 等
    cat -n 与 nl 均可显示行号，但默认的情况下，空白行会不会编号并不相同；
    touch 的目的在修改文件的时间参数，但亦可用来创建空文件；
    一个文件记录的时间参数有三种，分别是 access time(atime), status time (ctime), modification time(mtime)，ls 默认显示的是 mtime。
    除了传统的rwx权限之外，在Ext2/Ext3文件系统中，还可以使用chattr与lsattr配置及观察隐藏属性。 常见的包括只能新增数据的 +a 与完全不能更动文件的 +i 属性。
    新建文件/目录时，新文件的默认权限使用 umask 来规范。默认目录完全权限为drwxrwxrwx， 文件则为-rw-rw-rw-。
    文件具有SUID的特殊权限时，代表当使用者运行此一binary程序时，在运行过程中使用者会暂时具有程序拥有者的权限
    目录具有SGID的特殊权限时，代表使用者在这个目录底下新建的文件之群组都会与该目录的群组名称相同。
    目录具有SBIT的特殊权限时，代表在该目录下使用者创建的文件只有自己与root能够删除！
    观察文件的类型可以使用 file 命令来观察；
    搜寻命令的完整档名可用 which 或 type ，这两个命令都是透过 PATH 变量来搜寻档名；
    搜寻文件的完整档名可以使用 whereis 或 locate 到数据库文件去搜寻，而不实际搜寻文件系统；
    利用 find 可以加入许多选项来直接查询文件系统，以获得自己想要知道的档名。

08. Linux磁盘与文件系统管理

    基本上 Linux 的正统文件系统为 Ext2 ，该文件系统内的信息主要有：
        superblock：记录此 filesystem 的整体信息，包括inode/block的总量、使用量、剩余量， 以及文件系统的格式与相关信息等；
        inode：记录文件的属性，一个文件占用一个inode，同时记录此文件的数据所在的 block 号码；
        block：实际记录文件的内容，若文件太大时，会占用多个 block 。
    Ext2 文件系统的数据存取为索引式文件系统(indexed allocation)
    需要碎片整理的原因就是文件写入的 block 太过于离散了，此时文件读取的效能将会变的很差所致。 这个时候可以透过碎片整理将同一个文件所属的 blocks 汇整在一起。
    Ext2文件系统主要有：boot sector, superblock, inode bitmap, block bitmap, inode table, data block 等六大部分。
    data block 是用来放置文件内容数据地方，在 Ext2 文件系统中所支持的 block 大小有 1K, 2K 及 4K 三种而已
    inode 记录文件的属性/权限等数据，其他重要项目为： 每个 inode 大小均固定为 128 bytes； 每个文件都仅会占用一个 inode 而已； 因此文件系统能够创建的文件数量与 inode 的数量有关；
    文件的 block 在记录文件的实际数据，目录的 block 则在记录该目录底下文件名与其 inode 号码的对照表；
    日志式文件系统 (journal) 会多出一块记录区，随时记载文件系统的主要活动，可加快系统复原时间；
    Linux 文件系统为添加效能，会让主存储器作为大量的磁盘高速缓存；
    实体链接只是多了一个文件名对该 inode 号码的链接而已；
    符号链接就类似Windows的快捷方式功能。
    磁盘的使用必需要经过：分割、格式化与挂载，分别惯用的命令为：fdisk, mkfs, mount三个命令
    启动自动挂载可参考/etc/fstab之配置，配置完毕务必使用 mount -a 测试语法正确否；

09. 文件与文件系统的压缩与打包

    压缩命令为透过一些运算方法去将原本的文件进行压缩，以减少文件所占用的磁碟容量。 压缩前与压缩后的文件所占用的磁碟容量比值， 就可以被称为是『压缩比』
    压缩的好处是可以减少磁碟容量的浪费，在 WWW 网站也可以利用文件压缩的技术来进行数据的传送，好让网站频宽的可利用率上升喔
    压缩文件的扩展名大多是：『*.tar, *.tar.gz, *.tgz, *.gz, *.Z, *.bz2』
    常见的压缩命令有 gzip 与 bzip2 ，其中 bzip2 压缩比较之 gzip 还要更好，建议使用 bzip2 ！
    tar 可以用来进行文件打包，并可支持 gzip 或 bzip2 的压缩。
    压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称
    查　询：tar -jtv -f filename.tar.bz2
    解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录
    dump 命令可备份文件系统或单一目录
    dump 的备份若针对文件系统时，可进行 0-9 的 level 差异备份！其中 level 0 为完整备份；
    restore 命令可还原被 dump 建置的备份档；
    要创建光盘烧录数据时，可透过 mkisofs 命令来建置；
    可透过 cdrecord 来写入 CD 或 DVD 烧录机
    dd 可备份完整的 partition 或 disk ，因为 dd 可读取磁碟的 sector 表面数据
    cpio 为相当优秀的备份命令，不过必须要搭配类似 find 命令来读入欲备份的档名数据，方可进行备份动作。

vim:ft=txt:
